@using System;
@using System.Globalization;
@using HoiTroWebsite.HTLibraries;

@model HoiTroWebsite.Models.RoomInfo

@{
    ViewBag.Title = Model.title;
    Layout = "~/Views/Shared/_MyLayout.cshtml";
    string gia_tien = new NumberUnit(Model.price).RoundWithLargestUnit();
}

@*@Styles.Render("~/Content/css")
    @Scripts.Render("~/Scripts/js")*@
@section header
{
    <style>
        #hinh-anh-tin-dang .carousel-inner {
            background-color: #000;
            height: 400px;
        }

            #hinh-anh-tin-dang .carousel-inner .carousel-item img {
                object-fit: contain;
                margin: 0 auto;
                width: 100%;
                height: 100%;
                display: block;
            }

            #hinh-anh-tin-dang .carousel-inner .carousel-item {
                height: 100%;
            }

                #hinh-anh-tin-dang .carousel-inner .carousel-item.active {
                    height: 100%;
                }

        #hinh-anh-tin-dang .carousel-indicators {
            position: static !important;
        }
            /* Tùy chỉnh cho hình ảnh xem trước trong indicators */
            .carousel-indicators [data-bs-target] {
                width: 65px; /* Đặt kích thước của ảnh xem trước */
                height: 65px;
                overflow: hidden;
                border-radius: 4px; /* Tạo bo góc cho ảnh */
                border: 2px solid #fff;
                cursor: pointer;
                opacity: 0.7; /* Độ mờ cho ảnh xem trước */
                text-indent: initial !important;
/*                box-shadow: */
            }

        #hinh-anh-tin-dang .carousel-indicators .active {
            opacity: 1; /* Tăng độ sáng cho ảnh đang chọn */
            border-color: #007bff;
        }

        #hinh-anh-tin-dang .carousel-indicators img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Đảm bảo hình ảnh xem trước nằm gọn */
        }

        #hinh-anh-tin-dang .carousel-control-next-icon, .carousel-control-prev-icon {
            background-color: #fe0000;
        }

        #hinh-anh-tin-dang .carousel-control-next {
            justify-content: right;
        }

        #hinh-anh-tin-dang .carousel-control-prev {
            justify-content: left;
        }

        #hinh-anh-tin-dang .carousel-indicators .active {
            opacity: 1;
            border-color: #fe0000;
        }

    </style>
}
<div class="container">
    <div class="row">

        <div class="col-lg-8">
            <div id="hinh-anh-tin-dang" class="mb-5 bg-white rounded-3 overflow-hidden">
                <div id="slide-anh-phong" class="carousel slide" data-bs-touch="false" data-bs-ride="carousel" data-interval="10000">
                    @{
                        if (Model.RoomImages != null)
                        {
                            int n = Model.RoomImages.Count;

                            <div class="carousel-inner mb-3">
                                <div class="carousel-item active">
                                    <img src="@Model.RoomImages.ElementAt(0).imagePath@Model.RoomImages.ElementAt(0).file_name" class="d-block w-100" alt="@Model.RoomImages.ElementAt(0).file_name">
                                </div>
                                @for (int i = 1; i < n; i++)
                                {
                                    <div class="carousel-item">
                                        <img src="@Model.RoomImages.ElementAt(0).imagePath@Model.RoomImages.ElementAt(i).file_name" class="d-block w-100" alt="@Model.RoomImages.ElementAt(i).file_name">
                                    </div>
                                }
                            </div>

                            <div class="carousel-indicators">
                                <button type="button" data-bs-target="#slide-anh-phong" data-bs-slide-to="0" class="active">
                                    <img src="@Model.RoomImages.ElementAt(0).imagePath@Model.RoomImages.ElementAt(0).file_name" alt="@Model.RoomImages.ElementAt(0).file_name" />
                                </button>
                                @for (int i = 1; i < n; i++)
                                {
                                    <button type="button" data-bs-target="#slide-anh-phong" data-bs-slide-to="@i">
                                        <img src="@Model.RoomImages.ElementAt(0).imagePath@Model.RoomImages.ElementAt(i).file_name" alt="@Model.RoomImages.ElementAt(i).file_name" />
                                    </button>
                                }
                            </div>
                            <div style="height: 400px; justify-content: space-between; width: 100%; position: absolute; top: 0px; display: flex; left: 0px; ">
                                <button class="carousel-control-prev" type="button" data-bs-target="#slide-anh-phong" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#slide-anh-phong" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                            </div>
                        }
                    }
                </div>
            </div>
            <div class="left-content">


                <article class="the-post">
                    <header class="page-header">
                        <h1 class="page-h1">
                            <a style="font-size:large; color: #E13427;" href="" title="1,8tr phòng khép kín full đồ gần Học Viện Tài Chính">@Model.title</a>
                        </h1>
                        <div class="clearfix"></div>
                        <address class="post-address">@Model.location asfd asdf</address>
                        <div class="post-attributes">
                            <div class="item price"><i></i><span style="color: #16c784; font-weight: bold; font-size: 1.5rem">@gia_tien/tháng</span></div>
                            <div class="item acreage"><i></i><span> @Model.acreage m<sup>2</sup></span></div>
                            @*<div class="item published"><i></i><span>@Model.datebegin</span></div>*@
                            @*<div class="item hashtag"><i></i><span>@Model.id</span></div>*@
                        </div>
                    </header>

                    @*thông tin mô tả*@
                    <section class="section post-main-content">
                        <div class="section-header"><h2 class="section-title">Thông tin mô tả</h2></div>
                        <div class="section-content">
                            <p>@Html.DisplayFor(Model => Model.detail_description)</p>
                        </div>
                    </section>
                    @*đặc điểm đăng tin*@
                    <section class="section post-overview">
                        <div class="section-header">
                            <h3 class="section-title">Đặc điểm tin đăng</h3>
                        </div>
                        <div class="section-content">
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td class="name">Mã tin:</td>
                                        <td>@Model.id</td>
                                    </tr>
                                    @*<tr>
                                            <td class="name">Khu vực</td>
                                            <td> @Model.area </td>
                                        </tr>*@
                                    <tr>
                                        <td class="name">Đối tượng thuê:</td>
                                        <td>@Model.tenant</td>
                                    </tr>
                                    <tr>
                                        @{
                                            string dateString = Model.datebegin.ToString();

                                            // Định dạng của chuỗi ngày giờ
                                            string format = "MM/dd/yyyy h:mm:ss tt";

                                            // Chuyển đổi chuỗi thành DateTime
                                            DateTime date = DateTime.ParseExact(dateString, format, CultureInfo.InvariantCulture);

                                            // Tạo CultureInfo cho Việt Nam
                                            var vietnamCulture = new CultureInfo("vi-VN");

                                            // Định dạng ngày giờ theo kiểu "Thứ, ngày/tháng/năm giờ:phút:giây"
                                            string formattedDate = date.ToString("dddd, HH:mm tt dd/MM/yyyy", vietnamCulture);

                                        }
                                        <td class="name">Ngày đăng:</td>
                                        <td><time title="@formattedDate">@formattedDate</time></td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                    </section>
                    @*thông tin liên hệ*@
                    @*<section class="section post-contact">
                            <div class="section-header">
                                <h3 class="section-title">Thông tin liên hệ</h3>
                            </div>
                            <div class="section-content">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td class="name">Liên hệ:</td>
                                            <td> @Model.Account.name </td>
                                        </tr>
                                        <tr>
                                            <td class="name">Điện thoại:</td>
                                            <td> @Model.Account.phoneNum </td>
                                        </tr>
                                        <tr>
                                            <td class="name">Zalo</td>
                                            <td> @Model.Account.zaloNum </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </section>*@
                    @*bản đồ*@
                    <section class="section post-map">
                        <div class="section-header">
                            <h3 class="section-title">Bản đồ</h3>
                            <address class="section-description">Địa chỉ: Phạm Văn Nghị, Phường Cổ Nhuế 2, Quận Bắc Từ Liêm, Hà Nội</address>
                        </div>
                        <div class="section-content">
                            <div id="__maps_content" style="width:100%; height:300px;" data-lat="" data-long="" data-address="Phạm Văn Nghị, Phường Cổ Nhuế 2, Quận Bắc Từ Liêm, Hà Nội">
                                <iframe width="100%" height="100%" frameborder="0" style="border:0" src="https://www.google.com/maps/embed/v1/place?q=Phạm Văn Nghị, Phường Cổ Nhuế 2, Quận Bắc Từ Liêm, Hà Nội&amp;key=AIzaSyD6Coia3ssHYuRKJ2nDysWBdSlVlBCzKAw&amp;zoom=14" allowfullscreen=""></iframe>
                            </div>

                        </div>
                    </section>

                </article>

            </div>
        </div>

        <div class="col-lg-4">
            <div class="right-content">

                @*<div class="author-aside">
                        <figure class="author-avatar"><img src="https://phongtro123.com/images/default-user.png"></figure><span class="author-name">@Model.Account.name</span>
                        <div style="min-height: 16px; margin-bottom: 10px;">
                            <div class="js-author-online-status author-online-status offline" author_id="146225">
                                <i></i><span>
                                    Hoạt động vài
                                    giờ trước
                                </span>
                            </div>
                        </div><a class="btn author-phone" rel="nofollow" href="tel:@Model.Account.phoneNum"><i></i> @Model.Account.phoneNum</a><a class="btn author-zalo" target="_blank" rel="nofollow" href="https://zalo.me/0914398413">
                            <i></i> Nhắn
                            Zalo
                        </a><span class="btn post-save js-btn-save" data-post-id="668196"><i></i> Yêu thích</span>
                    </div>*@

                @{
                    Html.RenderAction("GetMiniNews", "MainPartial");
                    Html.RenderAction("GetLatestRoomList", "MainPartial");
                }
            </div>
        </div>

    </div>
</div>