<link href="@Url.Content("~/Content/css/bootstrap.min.css")" rel="stylesheet">
<style>
    body {
        background: #c9ccd1;
    }

    .form-style input {
        border: 0;
        height: 50px;
        border-radius: 0;
        border-bottom: 1px solid #ebebeb;
    }

        .form-style input:focus {
            border-bottom: 1px solid #007bff;
            box-shadow: none;
            outline: 0;
            background-color: #ebebeb;
        }

    .sideline {
        display: flex;
        width: 100%;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: #ccc;
    }

    button {
        height: 50px;
    }

    .sideline:before,
    .sideline:after {
        content: '';
        border-top: 1px solid #ebebeb;
        margin: 0 20px 0 0;
        flex: 1 0 20px;
    }

    .sideline:after {
        margin: 0 0 0 20px;
    }

    .alert {
        margin-top: 10px;
    }
</style>

<div class="container">
    <div class="row m-5 no-gutters shadow-lg">
        <div class="col-md-6 d-none d-md-block">
            <img src="~/Content/images/photo-1566888596782-c7f41cc184c5.jpg" class="img-fluid" style="min-height:100%;" />
        </div>
        <div class="col-md-6 bg-white p-5">
            <h3 class="pb-3">Admin đăng nhập</h3>
            <div id="login-alert"></div> <!-- Thông báo -->
            <div class="form-style">
                <form id="login-form">
                    @Html.AntiForgeryToken() <!-- Bảo mật -->
                    <div class="form-group pb-3">
                        <input type="text" placeholder="Email" class="form-control" id="Email" name="Email" required>
                    </div>
                    <div class="form-group pb-3">
                        <input type="password" placeholder="Mật khẩu" class="form-control" id="Password" name="Password" required>
                    </div>
                    <div class="pb-2">
                        <button type="submit" class="btn btn-dark w-100 font-weight-bold mt-2">Đăng nhập</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="~/Scripts/jquery-3.7.0.min.js" crossorigin="anonymous"></script>
<script>
    $("#login-form").submit(function (e) {
        e.preventDefault(); // Ngăn chặn hành vi submit mặc định
        const formData = $(this).serialize();
        $.ajax({
            type: "POST",
            url: '@Url.Action("Login", "Default")',
            data: formData,
            success: function (response) {
                if (response.statusCode === 200) {
                    alert(response.message);
                    window.location.href = response.redirectUrl;
                } else {
                    $("#login-alert").html(`<div class="alert alert-danger">${response.message}</div>`);
                }
            },
            error: function (error) {
                $("#login-alert").html(`<div class="alert alert-danger">Có lỗi xảy ra, vui lòng thử lại sau!</div>`);
            }
        });
    });
</script>
